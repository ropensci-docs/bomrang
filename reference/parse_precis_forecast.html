<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Parse local BOM daily précis forecast XML file(s) for select towns — parse_precis_forecast • rOpenSci: bomrang</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<!-- Bootstrap -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>

<!-- ropensci -->
<link href="../ropensci.css" rel="stylesheet">

<meta property="og:title" content="Parse local BOM daily précis forecast XML file(s) for select towns — parse_precis_forecast" />
<meta property="og:description" content="Parse local BOM daily précis forecast XML file(s) and
return a data frame of the seven-day town forecasts for a specified state or
territory or all Australia." />
<meta property="og:image" content="https://docs.ropensci.org/bomrang/logo.png" />
<meta name="twitter:card" content="summary" />






<!-- Matomo -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
<script src="https://ropensci.org/scripts/matomo.js"></script>
<noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt="" /></p></noscript>

<!-- End Matomo Code -->

  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci" /></a>
        <a class="navbar-brand" href="../index.html"><i>bomrang <small>v0.7.4</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/bomrang.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/use_case.html">bomrang Use Case</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
        <li>
  <a href="https://github.com/ropensci/bomrang/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Parse local BOM daily précis forecast XML file(s) for select towns</h1>
    <small class="dont-index">Source: <a href='https://github.com/ropensci/bomrang/blob/master/R/parse_precis_forecast.R'><code>R/parse_precis_forecast.R</code></a></small>
    <div class="hidden name"><code>parse_precis_forecast.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Parse local <acronym>BOM</acronym> daily précis forecast <acronym>XML</acronym> file(s) and
return a data frame of the seven-day town forecasts for a specified state or
territory or all Australia.</p>
    </div>

    <pre class="usage"><span class='fu'>parse_precis_forecast</span><span class='op'>(</span><span class='va'>state</span>, <span class='va'>filepath</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>state</th>
      <td><p>Required value of an Australian state or territory as full name
or postal code.  Fuzzy string matching via <code><a href='https://rdrr.io/r/base/agrep.html'>agrep</a></code> is
done.</p></td>
    </tr>
    <tr>
      <th>filepath</th>
      <td><p>A string providing the directory location of the précis
file(s) to parse. See Details for more.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></code> of Australia <acronym>BOM</acronym> précis
seven day forecasts for <acronym>BOM</acronym> selected towns.  For full details of
fields and units returned see Appendix 2 in the <a href='https://CRAN.R-project.org/package=bomrang'><span class="pkg">bomrang</span></a> vignette,
use<br />
<code><a href='../articles/bomrang.html'>vignette("bomrang", package = "bomrang")</a></code> to view.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Allowed state and territory postal codes, only one state per request
or all using <code>AUS</code>.</p><dl>
<dt>ACT</dt><dd><p>Australian Capital Territory (will return NSW)</p></dd>
<dt>NSW</dt><dd><p>New South Wales</p></dd>
<dt>NT</dt><dd><p>Northern Territory</p></dd>
<dt>QLD</dt><dd><p>Queensland</p></dd>
<dt>SA</dt><dd><p>South Australia</p></dd>
<dt>TAS</dt><dd><p>Tasmania</p></dd>
<dt>VIC</dt><dd><p>Victoria</p></dd>
<dt>WA</dt><dd><p>Western Australia</p></dd>
<dt>AUS</dt><dd><p>Australia, returns forecast for all states, NT and ACT</p></dd>

</dl>

<p>The <var>filepath</var> argument will only accept a directory where files
are located for parsing. DO NOT supply the full path including the file name.
This function will only parse the requested state or all of Australia in the
same fashion as <code><a href='get_precis_forecast.html'>get_precis_forecast</a></code>, provided that the files
are all present in the directory.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Forecast data come from Australian Bureau of Meteorology (<acronym>BOM</acronym>)
Weather Data Services <br />
<a href='http://www.bom.gov.au/catalogue/data-feeds.shtml'>http://www.bom.gov.au/catalogue/data-feeds.shtml</a></p>
<p>Location data and other metadata for towns come from
the <acronym>BOM</acronym> anonymous <acronym>FTP</acronym> server with spatial data <br />
<a href='ftp://ftp.bom.gov.au/anon/home/adfd/spatial/'>ftp://ftp.bom.gov.au/anon/home/adfd/spatial/</a>, specifically the
<acronym>DBF</acronym> file portion of a shapefile, <br />
<a href='ftp://ftp.bom.gov.au/anon/home/adfd/spatial/IDM00013.dbf'>ftp://ftp.bom.gov.au/anon/home/adfd/spatial/IDM00013.dbf</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><a href='get_precis_forecast.html'>get_precis_forecast</a></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Adam H. Sparks, <a href='mailto:adamhsparks@gmail.com'>adamhsparks@gmail.com</a> and Keith Pembleton,
<a href='mailto:keith.pembleton@usq.edu.au'>keith.pembleton@usq.edu.au</a> and Paul Melloy,
<a href='mailto:paul@melloy.com.au'>paul@melloy.com.au</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='co'># parse the short forecast for Queensland</span>

<span class='co'># download to tempfile() using basename() to keep original name</span>
<span class='fu'><a href='https://rdrr.io/r/utils/download.file.html'>download.file</a></span><span class='op'>(</span>url <span class='op'>=</span> <span class='st'>"ftp://ftp.bom.gov.au/anon/gen/fwo/IDQ11295.xml"</span>,
              destfile <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>,
              <span class='fu'><a href='https://rdrr.io/r/base/basename.html'>basename</a></span><span class='op'>(</span><span class='st'>"ftp://ftp.bom.gov.au/anon/gen/fwo/IDQ11295.xml"</span><span class='op'>)</span><span class='op'>)</span>,
              mode <span class='op'>=</span> <span class='st'>"wb"</span><span class='op'>)</span>

<span class='va'>BOM_forecast</span> <span class='op'>&lt;-</span> <span class='fu'>parse_precis_forecast</span><span class='op'>(</span>state <span class='op'>=</span> <span class='st'>"QLD"</span>,
                                      filepath <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>BOM_forecast</span>
</div><div class='output co'>#&gt;      index product_id state         town       aac       lat      lon elev
#&gt;   1:     0   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;   2:     1   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;   3:     2   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;   4:     3   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;   5:     4   IDQ11295   QLD     Brisbane QLD_PT001 -27.48080 153.0389  8.1
#&gt;  ---                                                                      
#&gt; 787:     2   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt; 788:     3   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt; 789:     4   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt; 790:     5   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt; 791:     6   IDQ11295   QLD Port Douglas QLD_PT254 -16.48681 145.4635 70.4
#&gt;         start_time_local end_time_local utc_offset      start_time_utc
#&gt;   1: 2021-07-11 05:00:00     2021-07-12      10:00 2021-07-10 19:00:00
#&gt;   2: 2021-07-12 00:00:00     2021-07-13      10:00 2021-07-11 14:00:00
#&gt;   3: 2021-07-13 00:00:00     2021-07-14      10:00 2021-07-12 14:00:00
#&gt;   4: 2021-07-14 00:00:00     2021-07-15      10:00 2021-07-13 14:00:00
#&gt;   5: 2021-07-15 00:00:00     2021-07-16      10:00 2021-07-14 14:00:00
#&gt;  ---                                                                  
#&gt; 787: 2021-07-13 00:00:00     2021-07-14      10:00 2021-07-12 14:00:00
#&gt; 788: 2021-07-14 00:00:00     2021-07-15      10:00 2021-07-13 14:00:00
#&gt; 789: 2021-07-15 00:00:00     2021-07-16      10:00 2021-07-14 14:00:00
#&gt; 790: 2021-07-16 00:00:00     2021-07-17      10:00 2021-07-15 14:00:00
#&gt; 791: 2021-07-17 00:00:00     2021-07-18      10:00 2021-07-16 14:00:00
#&gt;             end_time_utc minimum_temperature maximum_temperature
#&gt;   1: 2021-07-11 14:00:00                  NA                  22
#&gt;   2: 2021-07-12 14:00:00                  10                  21
#&gt;   3: 2021-07-13 14:00:00                  10                  22
#&gt;   4: 2021-07-14 14:00:00                  11                  23
#&gt;   5: 2021-07-15 14:00:00                  14                  25
#&gt;  ---                                                            
#&gt; 787: 2021-07-13 14:00:00                  20                  25
#&gt; 788: 2021-07-14 14:00:00                  21                  25
#&gt; 789: 2021-07-15 14:00:00                  20                  27
#&gt; 790: 2021-07-16 14:00:00                  21                  28
#&gt; 791: 2021-07-17 14:00:00                  19                  28
#&gt;      lower_precipitation_limit upper_precipitation_limit           precis
#&gt;   1:                        NA                        NA    Mostly sunny.
#&gt;   2:                         0                       0.4   Partly cloudy.
#&gt;   3:                        NA                        NA           Sunny.
#&gt;   4:                        NA                        NA    Mostly sunny.
#&gt;   5:                        NA                        NA   Partly cloudy.
#&gt;  ---                                                                     
#&gt; 787:                         0                       1.0   Partly cloudy.
#&gt; 788:                         0                       1.0 Possible shower.
#&gt; 789:                         0                       0.4   Partly cloudy.
#&gt; 790:                        NA                        NA    Mostly sunny.
#&gt; 791:                        NA                        NA    Mostly sunny.
#&gt;      probability_of_precipitation
#&gt;   1:                           10
#&gt;   2:                           30
#&gt;   3:                           10
#&gt;   4:                            5
#&gt;   5:                           20
#&gt;  ---                             
#&gt; 787:                           30
#&gt; 788:                           40
#&gt; 789:                           30
#&gt; 790:                           10
#&gt; 791:                           10</div><div class='input'><span class='co'># }</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <!-- begin footer -->
<div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg" /></div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
                    </div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
                    </div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
                            <h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks & Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
                    </div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '799829e946e1f0f9cd5b5a782c6316b9',
    indexName: 'ropensci-bomrang',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


